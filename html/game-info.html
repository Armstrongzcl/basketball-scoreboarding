<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<script type="text/javascript" src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/jquery-3.3.1.js"></script>
	</head>

	<body>
		<div class="mui-card">
			<!--页眉，放置标题-->
			<div class="mui-card-header">比赛队伍</div>
			<!--内容区-->
			<div class="mui-card-content">
				<script>
					function GetQueryString(name) {

						var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
						var r = window.location.search.substr(1).match(reg);
						if(r != null) return unescape(r[2]);
						return null;
					}
					var gaid = GetQueryString('id');
					//$.getJSON("../datas/games.json", function(result) {
					mui.plusReady(function() {
						plus.io.requestFileSystem(plus.io.PRIVATE_DOC, function(fs) {
							fs.root.getFile("datas/recent_games.json", {
								create: true
							}, function(file) {
								var fileReader = new plus.io.FileReader();
								fileReader.readAsText(file, "utf-8");
								fileReader.onloadend = function(e) {
									var datestr = e.target.result;
									var result;
									if(datestr == "") {
										result = [];
									} else {
										result = JSON.parse(datestr);
									}

								    game = result[gaid];
									$("#first").append("<div class='mui-col-sm-3 mui-col-xs-3'>" + game.firstClass + ":</div>" +
										"<div class='mui-col-sm-3 mui-col-xs-3'>" + game.firstName + "</div>" +
										"<div class='mui-col-sm-3 mui-col-xs-3'>教练：</div>" +
										"<div class='mui-col-sm-3 mui-col-xs-3'>" + game.firstCoach + "</div>"
									);
									$("#second").append("<div class='mui-col-sm-3 mui-col-xs-3'>" + game.secondClass + ":</div>" +
										"<div class='mui-col-sm-3 mui-col-xs-3'>" + game.secondName + "</div>" +
										"<div class='mui-col-sm-3 mui-col-xs-3'>教练：</div>" +
										"<div class='mui-col-sm-3 mui-col-xs-3'>" + game.secondCoach + "</div>"
									);
									$("#score").append("<div class='mui-col-sm-5 mui-col-xs-5' style='text-align: right'>" + game.firstScore + "</div>" +
										"<div class='mui-col-sm-2 mui-col-xs-2' style='text-align: center'>:</div>" +
										"<div class='mui-col-sm-5 mui-col-xs-5' style='text-align: left'>" + game.secondScore + "</div>"
									);

									$.each(game.firstTeam, function(key, value) {
										$("#firstTeam").append("<div class='mui-row'>" +
											"<div class='mui-col-sm-1 mui-col-xs-1'>" + value.number + "</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.name + "</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.position + "</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.lineup + "</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.score + "分</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.foul + "犯</div>" +
											"<div class='mui-col-sm-1 mui-col-xs-1'>" + value.asts + "助</div>" +
											"</div>"
										);
									})
									$.each(game.secondTeam, function(key, value) {
										$("#secondTeam").append("<div class='mui-row'>" +
											"<div class='mui-col-sm-1 mui-col-xs-1'>" + value.number + "</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.name + "</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.position + "</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.lineup + "</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.score + "分</div>" +
											"<div class='mui-col-sm-2 mui-col-xs-2'>" + value.foul + "犯</div>" +
											"<div class='mui-col-sm-1 mui-col-xs-1'>" + value.asts + "助</div>" +
											"</div>"
										);
									});

								}
							});
						});
					});

					//});
				</script>
				<div style="text-align: center;" id="first" class="mui-row">

				</div>
				<div style="text-align: center;" id="second" class="mui-row">

				</div>
				<div style="text-align: center;" id="score" class="mui-row">

				</div>
			</div>
			<!--页脚，放置补充信息或支持的操作-->
		</div>

		<div class="mui-card">
			<!--页眉，放置标题-->
			<div class="mui-card-header">新疆广汇</div>
			<!--内容区-->
			<div class="mui-card-content" id="firstTeam">
			</div>
			<!--页脚，放置补充信息或支持的操作-->
		</div>
		<div class="mui-card">
			<!--页眉，放置标题-->
			<div class="mui-card-header">北京金隅</div>
			<!--内容区-->
			<div class="mui-card-content" id="secondTeam">
			</div>
			<!--页脚，放置补充信息或支持的操作-->
		</div>
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init()
		</script>

	</body>

</html>